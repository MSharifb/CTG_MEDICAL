@model BOM_MPA.Web.Areas.PRM.ViewModel.SalaryScaleViewModel
@{
    ViewBag.Title = "Create";
    Layout = "~/Areas/PRM/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm("Create", "JobGradeNew", FormMethod.Post, new { id = "frmJobGrade" }))
{
    <fieldset>
        <div class="GroupBox" style="min-height: 15px" id="message">
            @Html.ValidationSummary(false, BOM_MPA.Web.Utility.Common.ValidationSummaryHead)
        </div>

        @Html.Partial("_CreateOrEdit", Model)

        <br />
        <div class="button-center buttonSubmit">
            @if ((new BOM_MPA.Web.Utility.AppConstant()).IsAddAssigned)
            {
                <input type="submit" value="Save" style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" />
            }

            <input type="button" value="Clear" id="btnClear" name="btnClear" />
        </div>
    </fieldset>
}
<div class="button-crude button-left" style="padding-left: 5px;">
    @Html.ActionLink("Back to List", "Index")
</div>

<script type="text/javascript">
    $('#btnAdd').live('click', function () {
        debugger;
        $('#message').empty();
        var tr = $('#grid tbody tr').first().clone();

        var Id = $(tr).find("td:eq(0)").find("input");
        var StepName = $(tr).find("td:eq(1)").find("input");
        var StepAmount = $(tr).find("td:eq(2)").find("input");

        //reset the value
        $(Id).val('0');
       // $(StepName).val('1');
        $(StepAmount).val('0');
      

        // $('#grid').find('tbody').append('<tr class="row">' + $(tr).html() + '</tr>')
        $("#grid tbody").append('<tr class="row">' + $(tr).html() + '</tr>');

        RearrengeControlName();
    })

    $('.row a.deleteRow').live('click', function () {
        if ($('#grid tbody tr').length > 1)
            $(this).parent().parent().remove();

        RearrengeControlName();
    })

    $('#btnClear').live('click', function () {
        document.getElementById('frm').reset();
        $('#btnAdd').show();
    })

    function RearrengeControlName() {
        $('#grid tbody tr').each(function (outIndex) {
            $(this).find('td').each(function (innerIndex) {               
                if ($(this).find('input').length > 0)
                    $(this).find('input').attr('name', $(this).find('input').attr('name').replace(/\[(.*?)\]/, '[' + outIndex + ']'));

            })
        })
    }


</script>