@model BEPZA_MEDICAL.Web.Areas.PRM.ViewModel.JobAdvertisementInfo.JobAdvertisementInfoViewModel

@{
    ViewBag.Title = "Create";
    Layout = "~/Areas/PRM/Views/Shared/_Layout.cshtml";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("Create", "JobAdvertisementInfo", FormMethod.Post, new { id = "frm", @encType = "multipart/form-data" }))
{
    <div ng-app="JobAdvertisementApp" ng-controller="JobAdvertisementController">
        <fieldset>
            <div class="GroupBox" id="message">
                @Html.ValidationSummary(false, BEPZA_MEDICAL.Web.Utility.Common.ValidationSummaryHead)
                @if (!string.IsNullOrEmpty(Model.ErrMsg))
            {
                    <div id="ErrMsg" class="@Model.errClass">
                        @Model.ErrMsg
                    </div>
            }
            </div>
            @Html.Partial("_CreateOrEdit", Model)
            <div class="button-crude">
                @if ((new BEPZA_MEDICAL.Web.Utility.AppConstant()).IsAddAssigned)
            {
                    <input type="submit" value="Save" id="btnSave" name="btnSubmit" style="margin-right: 8px;" />
            }
                <input type="button" value="Clear" id="btnClear" name="btnClear" />
            </div>
        </fieldset>
    </div>
}
<div class="button-crude button-left">
    @Html.ActionLink("Back to List", "Index")
</div>

@*<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>

<script>
    var JobAdvertisementPostDetailList = [];
    var app = angular;
    app.module('JobAdvertisementApp',[]); //, ['ngRoute', 'ngResource']

    app.module('JobAdvertisementApp').controller('JobAdvertisementController', JobAdvertisementController);
    JobAdvertisementController.$inject = ['$scope', '$q', '$http'];

    function JobAdvertisementController($scope, $q, $http) {
        $scope.JobAdvertisementInfoViewModel = {};
        $scope.JobAdvertisementPostDetail = [];
        $scope.JobAdvertisementPost = {};

        $scope.PagesCommand = {
            edit: function (LoanEligible) {
                $scope.LoanEligible = LoanEligible;
                $scope.isGridShow = false;
                $scope.plnk = 'app/Views/Loan/LoanEligible/edit.html';
            },
            create: function () {
                $scope.LoanEligible = {};
                $scope.isGridShow = false;
                $scope.plnk = 'app/Views/Loan/LoanEligible/create.html';
            },
            AddDetail: function () {
                $scope.JobAdvertisementPost.ApplicationFee = $("#ApplicationFee").val();
                $scope.JobAdvertisementPost.EmploymentTypeId = $("#EmploymentTypeId").val();
                $scope.JobAdvertisementPost.NumOfRequiredPost = $("#NumOfRequiredPost").val();
                $scope.JobAdvertisementPost.DesignationId = $("#DesignationId").val();
                $scope.JobAdvertisementPost.DesignationName = $("#DesignationId option:selected").text();
                $scope.JobAdvertisementPost.SectionId = $("#SectionId").val();
                $scope.JobAdvertisementPost.DepartmentId = $("#DepartmentId").val();
                $scope.JobAdvertisementPost.OrgLevelId = $("#OrgLevelId").val();
                $scope.JobAdvertisementPost.JobAdvertisementInfoId = $("#Id").val();
                $scope.JobAdvertisementPost.SL = $scope.JobAdvertisementPostDetail.length + 1;
                $scope.JobAdvertisementPost.Id = 0;

                $scope.JobAdvertisementPostDetail.push($scope.JobAdvertisementPost);
                JobAdvertisementPostDetailList = $scope.JobAdvertisementPostDetail;
                $scope.JobAdvertisementPost = {};
            },
            detailRemove: function (AdPost) {
                if (AdPost.Id == 0) {
                    for (var i = 0; i < $scope.JobAdvertisementPostDetail.length; i++) {
                        if ($scope.JobAdvertisementPostDetail[i].SL == AdPost.SL) {
                            $scope.JobAdvertisementPostDetail.splice(i, 1);
                            JobAdvertisementPostDetailList = $scope.JobAdvertisementPostDetail;
                            break;
                        }
                    }
                    //  console.log($scope.InstallmentInformationList);
                }
                else {
                    //InstallmentInformation.Id = parseInt(InstallmentInformation.Id) * -1;
                    //$scope.InstDeleteList.push(InstallmentInformation);
                    //for (var i = 0; i < $scope.InstallmentInformationList.length; i++) {
                    //    if ($scope.InstallmentInformationList[i].Id == InstallmentInformation.Id) {
                    //        $scope.InstallmentInformationList.splice(i, 1);
                    //        break;
                    //    }
                    //}
                }
            }
        };

    };


</script>*@