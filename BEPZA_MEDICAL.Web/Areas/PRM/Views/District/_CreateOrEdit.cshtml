@model BEPZA_MEDICAL.Web.Areas.PRM.ViewModel.DistrictViewModel
 @*<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>*@
@*<script src="@Url.Content("~/Scripts/validation.js")" type="text/javascript"></script>*@
<script type="text/javascript">
    $(document).ready(function () {
        $("#CountryId").focus();
    });

    
</script>
<div class="GroupBox">
    <div class="row">
        <span class="label">
            @Html.HiddenFor(model => model.Id)
            @Html.LabelFor(model => model.CountryId)
            <label class="required-field">
                *</label>
        </span><span class="field">
            @Html.DropDownListFor(model => model.CountryId, Model.CountryList, @String.Format("{0}", Content.DDLOptionalLabel()), new { @class = "required", onchange = "LoadDivision();" })
            @* @Html.DropDownListFor(model => model.CountryId, new SelectList(ViewBag.CountryList, "Id", "Name"),"-- select Country --")*@
        </span><span class="label-right">
            @Html.LabelFor(model => model.DivisionId)
            <label class="required-field">
                *</label>
        </span><span class="field">
            @Html.DropDownListFor(model => model.DivisionId, Model.DivisionList, @String.Format("{0}", Content.DDLOptionalLabel()), new { @class = "required" })
            @*@Html.DropDownListFor(model => model.DivisionId, Enumerable.Empty<SelectListItem>(), "-- select Division --")*@
        </span>
    </div>
    <div class="row">
        <span class="label">
            @Html.LabelFor(model => model.DistrictName)
            <label class="required-field">
                *</label>
        </span><span class="field">
            @Html.EditorFor(model => model.DistrictName)
        </span>
    </div>
    <div class="clear">
    </div>
</div>
<div class="GroupBox">
    <div class="button-center buttonSubmit">
    @if ((new BEPZA_MEDICAL.Web.Utility.AppConstant()).IsAddAssigned)
    {
        <input type="submit" value="Save" id="btnSave" name="btnSubmit" style="margin-right: 8px;" />
    }
    @if ((new BEPZA_MEDICAL.Web.Utility.AppConstant()).IsAddAssigned)
    {
        <input type="submit" value="Update" id="btnUpdate" name="btnSubmit" style="margin-right: 8px;
            display: none" />
    }
        <input type="button" value="Clear" id="btnClear" name="btnSubmit" />
    </div>
</div>

<script type="text/javascript">

    $(function () {

        $('#btnSave').click(function (event) {
            event.preventDefault();
            $.validator.unobtrusive.parse($('#frm'));
            if ($('#frm').valid()) {
                var url = '@Url.Action("Create", "District")';
                var form = $('#frm');
                var serializedForm = form.serialize();
                $.post(url, serializedForm, function (obj) {  //Post to action
                    if (obj.Success) {
                        $("#message").html("<b>" + obj.Message + "</b>").css("color", "green");
                        ResetForm();
                        jQuery("#jqGrid").trigger("reloadGrid");
                    }
                    else {
                        $("#message").html("<b>" + obj.Message + "</b>").css("color", "red");
                    }
                });
            }
        })

        $('#btnUpdate').click(function (event) {
            event.preventDefault();
            $.validator.unobtrusive.parse($('#frm'));
            if ($('#frm').valid()) {
                var url = '@Url.Action("Edit", "District")';
                var form = $('#frm');
                var serializedForm = form.serialize();
                $.post(url, serializedForm, function (obj) {  //Post to action
                    if (obj.Success) {
                        $("#message").html("<b>" + obj.Message + "</b>").css("color", "green");
                        ResetForm();
                        jQuery("#jqGrid").trigger("reloadGrid");
                        $('#btnSave').show();
                    }
                    else {
                        $("#message").html("<b>" + obj.Message + "</b>").css("color", "red");
                    }
                });
            }
        })
    });

</script>
