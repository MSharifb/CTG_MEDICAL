@using BEPZA_MEDICAL.Web.Areas.FAM.Models.ChequeInfo
@model ChequeInfoModel
           
<div class="frm-content">
        <div class="GroupBox search-content">
            <div id="jqSearch">
            </div>
            <div class="row">
                <div class="button-crude button-left">
                    @Ajax.ActionLink("Add New", "create", new AjaxOptions { OnComplete = "OnCompleteAddnew" })
                
                </div>            
            </div>
        </div>
        <div class="grid">
            <table id="jqGrid" cellpadding="0" cellspacing="0">
            </table>
            <div id="jqGridPager" style="text-align: center;">
            </div>
            @Html.Partial("_GridList", Model)
        </div>
</div>

<script type="text/javascript">
    function OnCompleteAddnew(content) {
        if (content.statusText == 'OK') {
            $('.search-content').hide();
            $('.frm-content').html(content.responseText);
        } else {
            $('#message').text('An error has occoured. Please try again.').css({ 'color': 'red' });
        }
    }

    $(function () {
        $('#BankId').live('change',function(){
            var bankId = $(this).val();
            $.get(
                    "@Url.Action("GetAccHeadList")",
                    {'id':bankId},
                    function(r){
                        if(r != ''){
                            //$('.search-content').show();
                            $('.ddl-acc-head').html(r);
                        }
                        else{
                            //$('.search-content').hide();
                            $("#message").show();
                            $('#message').text(data).css({ 'color':'red' });
                            $("#message").delay(3000).hide();
                        }
                    }
                );
        })
    })

    $('#btnGenChqNo').live('click',function(){
        var noOfLeaf = $('#NumberOfLeaf').val();
        var startNo = $('#ChequeStartingNumber').val();
        
        $('#grid tbody').empty();
        for (var i = 1; i <= noOfLeaf; i++) {
            var row = "<tr><td>"+ i +"</td><td>"+ pad((parseInt(startNo,10)+i-1),6) +"</td><td>Unused</td><td>0</td></tr>";
            $('#grid tbody').append(row);
        }
    })

    function pad(number, length) {   
        var str = '' + number;
        while (str.length < length) {
            str = '0' + str;
        }
   
        return str;
    }

</script>